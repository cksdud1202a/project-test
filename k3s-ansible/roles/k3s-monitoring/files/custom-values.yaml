# 1. Prometheus 관련 설정 (통합 차트이므로 prometheus: 아래에 넣어야 함)
prometheus:
  prometheusSpec:
    retention: 10d
    storageSpec:
      disableMountSubPath: true

# 2. Grafana 관련 설정 (grafana: 아래에 묶어줘야 인식됨)
grafana:
  enabled: true
  adminUser: "admin"
  adminPassword: "admin"
  
  service:
    type: NodePort # K3s 환경에서 외부 접속을 위해 가장 확실한 방법
    nodePort: 32000

  persistence:
    enabled: true
    size: 10Gi
    storageClassName: "local-path"

  # 대시보드 프로바이더: Grafana가 어떤 경로에서 JSON을 읽을지
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
        - name: 'default'               # 아래 dashboards.default 와 연결
          orgId: 1
          folder: 'K3s Cluster'         # Grafana UI에서 보이는 폴더 이름
          type: file
          disableDeletion: false
          editable: true
          options:
            path: /var/lib/grafana/dashboards/default
            # kube-prometheus-stack가 알아서 이 경로에 ConfigMap/파일 마운트해줌

  # gnetId로 grafana.com에서 직접 다운로드
  dashboards:
    default:
      k8s-cluster-315:
        gnetId: 315
        revision: 3
        datasource: Prometheus